{
  "version": 3,
  "sources": ["../../@babel/runtime/helpers/esm/taggedTemplateLiteral.js", "../../@babel/runtime/helpers/esm/extends.js", "../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js", "../../@babel/runtime/helpers/esm/objectWithoutProperties.js", "../../rete-react-plugin/src/renderer.ts", "../../rete-react-plugin/src/utils.ts", "../../rete-react-plugin/src/presets/classic/components/ConnectionWrapper.tsx", "../../rete-react-plugin/src/presets/classic/components/Connection.tsx", "../../rete-react-plugin/src/shared/utils.ts", "../../rete-react-plugin/src/shared/drag.tsx", "../../rete-react-plugin/src/presets/classic/components/Control.tsx", "../../rete-react-plugin/src/presets/classic/vars.ts", "../../rete-react-plugin/src/ref-component.tsx", "../../rete-react-plugin/src/presets/classic/components/refs/RefControl.tsx", "../../rete-react-plugin/src/presets/classic/components/refs/RefSocket.tsx", "../../rete-react-plugin/src/presets/classic/components/Node.tsx", "../../rete-react-plugin/src/presets/classic/components/Socket.tsx", "../../rete-react-plugin/src/presets/classic/index.tsx", "../../rete-react-plugin/src/presets/context-menu/hooks.ts", "../../rete-react-plugin/src/presets/context-menu/vars.ts", "../../rete-react-plugin/src/presets/context-menu/styles.ts", "../../rete-react-plugin/src/presets/context-menu/components/Item.tsx", "../../rete-react-plugin/src/presets/context-menu/components/Search.tsx", "../../rete-react-plugin/src/presets/context-menu/components/Menu.tsx", "../../rete-react-plugin/src/presets/context-menu/index.tsx", "../../rete-react-plugin/node_modules/usehooks-ts/dist/esm/useCopyToClipboard/useCopyToClipboard.js", "../../rete-react-plugin/node_modules/usehooks-ts/dist/esm/useElementSize/useElementSize.js", "../../rete-react-plugin/node_modules/usehooks-ts/dist/esm/useEventListener/useEventListener.js", "../../rete-react-plugin/node_modules/usehooks-ts/dist/esm/useFetch/useFetch.js", "../../rete-react-plugin/node_modules/usehooks-ts/dist/esm/useIsomorphicLayoutEffect/useIsomorphicLayoutEffect.js", "../../rete-react-plugin/src/presets/minimap/utils.ts", "../../rete-react-plugin/src/presets/minimap/components/MiniNode.tsx", "../../rete-react-plugin/src/presets/minimap/components/MiniViewport.tsx", "../../rete-react-plugin/src/presets/minimap/components/Minimap.tsx", "../../rete-react-plugin/src/presets/minimap/index.tsx", "../../rete-react-plugin/src/presets/reroute-pins/Pin.tsx", "../../rete-react-plugin/src/presets/reroute-pins/index.tsx", "../../rete-react-plugin/src/presets/index.ts", "../../rete-react-plugin/src/index.tsx"],
  "sourcesContent": ["export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}", "export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}", "export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  for (var key in source) {\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}", "import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}", "import * as ReactDOM from 'react-dom'\n\nexport type Renderer = { mount: ReactDOM.Renderer, unmount: (container: HTMLElement) => void }\n\ntype CreateRoot = (container: Element | DocumentFragment) => any\n\nexport function getRenderer(props?: { createRoot?: CreateRoot }): Renderer {\n  const createRoot = props?.createRoot\n  const wrappers = new WeakMap<HTMLElement, HTMLElement>()\n\n  function getWrapper(container: HTMLElement) {\n    const wrapper = wrappers.get(container)\n\n    if (wrapper) return wrapper\n\n    const span = document.createElement('span')\n\n    container.appendChild(span)\n    return wrappers.set(container, span).get(container) as HTMLElement\n  }\n  function removeWrapper(container: HTMLElement) {\n    const wrapper = wrappers.get(container)\n\n    if (wrapper) wrapper.remove()\n    wrappers.delete(container)\n  }\n\n  if (createRoot) {\n    const roots = new WeakMap<HTMLElement, any>()\n\n    return {\n      mount: ((\n        element: React.DOMElement<React.DOMAttributes<any>, any>,\n        container: HTMLElement\n      ): Element => {\n        const wrapper = getWrapper(container)\n\n        if (!roots.has(wrapper)) {\n          roots.set(wrapper, createRoot(wrapper))\n        }\n        const root = roots.get(wrapper)\n\n        return root.render(element)\n      }) as ReactDOM.Renderer,\n      unmount: (container: HTMLElement) => {\n        const wrapper = getWrapper(container)\n        const root = roots.get(wrapper)\n\n        if (root) {\n          root.unmount()\n          roots.delete(wrapper)\n          removeWrapper(container)\n        }\n      }\n    }\n  }\n\n  return {\n    mount: ((element: React.DOMElement<React.DOMAttributes<any>, any>, container: HTMLElement): Element => {\n      return ReactDOM.render(element, getWrapper(container))\n    }) as ReactDOM.Renderer,\n    unmount: (container: HTMLElement) => {\n      ReactDOM.unmountComponentAtNode(getWrapper(container))\n      removeWrapper(container)\n    }\n  }\n}\n", "import { useEffect, useRef, useState } from 'react'\nimport { flushSync } from 'react-dom'\n\nexport function Root({ children, rendered }: { children: JSX.Element | null, rendered: () => void }) {\n  useEffect(() => {\n    rendered()\n  })\n\n  return children\n}\n\nexport function syncFlush() {\n  const ready = useRef(false)\n\n  useEffect(() => {\n    ready.current = true\n  }, [])\n\n  return {\n    apply(f: () => void) {\n      if (ready.current) {\n        queueMicrotask(() => flushSync(f))\n      } else {\n        f()\n      }\n    }\n  }\n}\n\nexport function useRete<T extends { destroy(): void }>(create: (el: HTMLElement) => Promise<T>) {\n  const [container, setContainer] = useState<null | HTMLElement>(null)\n  const editorRef = useRef<T>()\n  const [editor, setEditor] = useState<T | null>(null)\n  const ref = useRef(null)\n\n  useEffect(() => {\n    if (container) {\n      if (editorRef.current) {\n        editorRef.current.destroy()\n        container.innerHTML = ''\n      }\n      create(container).then((value) => {\n        editorRef.current = value\n        setEditor(value)\n      })\n    }\n  }, [container, create])\n\n  useEffect(() => {\n    return () => {\n      if (editorRef.current) {\n        editorRef.current.destroy()\n      }\n    }\n  }, [])\n  useEffect(() => {\n    if (ref.current) {\n      setContainer(ref.current)\n    }\n  }, [ref.current])\n\n  return [ref, editor] as const\n}\n", "import * as React from 'react'\nimport { createContext, useContext, useEffect, useState } from 'react'\n\nimport { Position } from '../../../types'\nimport { syncFlush } from '../../../utils'\n\nexport type ConnectionContextValue = { start: Position | null, end: Position | null, path: null | string }\n\nexport const ConnectionContext = createContext<ConnectionContextValue>({\n  start: null,\n  end: null,\n  path: null\n})\n\ntype PositionWatcher = (cb: (value: Position) => void) => (() => void)\n\ntype Props = {\n    children: JSX.Element,\n    start: Position | PositionWatcher,\n    end: Position | PositionWatcher,\n    path(start: Position, end: Position): Promise<null | string>\n}\n\nexport function ConnectionWrapper(props: Props) {\n  const { children } = props\n  const [computedStart, setStart] = useState<Position | null>(null)\n  const [computedEnd, setEnd] = useState<Position| null>(null)\n  const [path, setPath] = useState<string | null>(null)\n  const start = 'x' in props.start ? props.start : computedStart\n  const end = 'x' in props.end ? props.end : computedEnd\n  const flush = syncFlush()\n\n  useEffect(() => {\n    const unwatch1 = typeof props.start === 'function' && props.start(s => flush.apply(() => setStart(s)))\n    const unwatch2 = typeof props.end === 'function' && props.end(s => flush.apply(() => setEnd(s)))\n\n    return () => {\n      unwatch1 && unwatch1()\n      unwatch2 && unwatch2()\n    }\n  }, [])\n  useEffect(() => {\n    if (start && end) props.path(start, end).then(p => flush.apply(() => setPath(p)))\n  }, [start, end])\n\n  return (\n    <ConnectionContext.Provider value={{ start, end, path }}>\n      {children}\n    </ConnectionContext.Provider>\n  )\n}\n\nexport function useConnection() {\n  return useContext(ConnectionContext)\n}\n", "import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { ClassicScheme } from '../types'\nimport { useConnection } from './ConnectionWrapper'\n\nconst Svg = styled.svg`\n    overflow: visible !important;\n    position: absolute;\n    pointer-events: none;\n    width: 9999px;\n    height: 9999px;\n`\n\nconst Path = styled.path<{ styles?: (props: any) => any }>`\n    fill: none;\n    stroke-width: 5px;\n    stroke: steelblue;\n    pointer-events: auto;\n    ${props => props.styles && props.styles(props)}\n`\n\nexport function Connection(props: { data: ClassicScheme['Connection'] & { isLoop?: boolean }, styles?: () => any }) {\n  const { path } = useConnection()\n\n  if (!path) return null\n\n  return (\n    <Svg data-testid=\"connection\">\n      <Path\n        styles={props.styles}\n        d={path} />\n    </Svg>\n  )\n}\n", "export function copyEvent<T extends Event & Record<string, any>>(e: T) {\n  const newEvent = new (e.constructor as { new(type: string): T })(e.type)\n  let current = newEvent\n\n  while ((current = Object.getPrototypeOf(current))) {\n    const keys = Object.getOwnPropertyNames(current)\n\n    for (const k of keys) {\n      const item = newEvent[k]\n\n      if (typeof item === 'function') continue\n\n      Object.defineProperty(newEvent, k, { value: e[k] })\n    }\n  }\n\n  return newEvent\n}\n\nconst rootPrefix = '__reactContainer$'\n\ntype Keys = `${typeof rootPrefix}${string}` | '_reactRootContainer'\ntype ReactNode = { [key in Keys]?: unknown } & HTMLElement\n\nexport function findReactRoot(element: HTMLElement) {\n  let current: ReactNode | null = element as ReactNode\n\n  while (current) {\n    if (current._reactRootContainer || Object.keys(current).some(key => key.startsWith(rootPrefix))) return current\n    current = current.parentElement as ReactNode\n  }\n}\n", "import * as React from 'react'\n\nimport { Position } from '../types'\nimport { copyEvent, findReactRoot } from './utils'\n\ntype Translate = (dx: number, dy: number) => void\ntype StartEvent = { pageX: number, pageY: number }\n\nexport function useDrag(translate: Translate, getPointer: (e: StartEvent) => Position) {\n  return {\n    start(e: StartEvent) {\n      let previous = { ...getPointer(e) }\n\n      function move(moveEvent: MouseEvent) {\n        const current = { ...getPointer(moveEvent) }\n        const dx = current.x - previous.x\n        const dy = current.y - previous.y\n\n        previous = current\n\n        translate(dx, dy)\n      }\n      function up() {\n        window.removeEventListener('pointermove', move)\n        window.removeEventListener('pointerup', up)\n        window.removeEventListener('pointercancel', up)\n      }\n\n      window.addEventListener('pointermove', move)\n      window.addEventListener('pointerup', up)\n      window.addEventListener('pointercancel', up)\n    }\n  }\n}\n\nexport function useNoDrag(ref: React.MutableRefObject<HTMLElement | null>, disabled?: boolean) {\n  React.useEffect(() => {\n    const handleClick = (e: PointerEvent) => {\n      if (disabled) return\n\n      const root = findReactRoot(e.target as HTMLElement)\n      const target = React.version.startsWith('16') ? document : root\n\n      if (target) {\n        e.stopPropagation()\n        target.dispatchEvent(copyEvent(e))\n      }\n    }\n    const el = ref.current\n\n    el?.addEventListener('pointerdown', handleClick)\n\n    return () => {\n      el?.removeEventListener('pointerdown', handleClick)\n    }\n  }, [ref, disabled])\n}\n\nexport function NoDrag(props: { children: React.ReactNode, disabled?: boolean }) {\n  const ref = React.useRef<HTMLDivElement | null>(null)\n\n  useNoDrag(ref, props.disabled)\n\n  return <span ref={ref}>{props.children}</span>\n}\n", "import * as React from 'react'\nimport { ClassicPreset } from 'rete'\nimport styled from 'styled-components'\n\nimport { Drag } from '../../../shared'\n\nconst Input = styled.input<{ styles?: (props: any) => any }>`\n  width: 100%;\n  border-radius: 30px;\n  background-color: white;\n  padding: 2px 6px;\n  border: 1px solid #999;\n  font-size: 110%;\n  box-sizing: border-box;\n  ${props => props.styles && props.styles(props)}\n`\n\nexport function Control<N extends 'text' | 'number'>(props: { data: ClassicPreset.InputControl<N>, styles?: () => any }) {\n  const [value, setValue] = React.useState(props.data.value)\n  const ref = React.useRef(null)\n\n  Drag.useNoDrag(ref)\n\n  React.useEffect(() => {\n    setValue(props.data.value)\n  }, [props.data.value])\n\n  return (\n    <Input\n      value={value}\n      type={props.data.type}\n      ref={ref}\n      readOnly={props.data.readonly}\n      onChange={e => {\n        const val = (props.data.type === 'number'\n          ? +e.target.value\n          : e.target.value) as typeof props.data['value']\n\n        setValue(val)\n        props.data.setValue(val)\n      }}\n      styles={props.styles}\n    />\n  )\n}\n", "export const $nodecolor = 'rgba(110,136,255,0.8)'\nexport const $nodecolorselected = '#ffd92c'\nexport const $socketsize = 24\nexport const $socketmargin = 6\nexport const $socketcolor = '#96b38a'\nexport const $nodewidth = 180\n", "import * as React from 'react'\n\ntype RefUpdate = (ref: HTMLElement) => void\ntype BaseProps = { init: RefUpdate, unmount: RefUpdate } & Record<string, unknown>\n\n/**\n * Component for rendering various elements embedded in the React.js component tree.\n */\nexport function RefComponent<Props extends BaseProps>({ init, unmount, ...props }: Props) {\n  const ref = React.useRef<HTMLSpanElement>(null)\n\n  React.useEffect(() => {\n    const element = ref.current\n\n    return () => {\n      if (element) unmount(element)\n    }\n  }, [])\n  React.useEffect(() => {\n    if (ref.current) init(ref.current)\n  })\n\n  return <span {...props} ref={ref} />\n}\n", "import * as React from 'react'\nimport { ClassicPreset } from 'rete'\n\nimport { RefComponent } from '../../../../ref-component'\nimport { ClassicScheme, GetControls, ReactArea2D } from '../../types'\n\ntype Props<Scheme extends ClassicScheme> = {\n  name: string\n  emit: (props: ReactArea2D<Scheme>) => void\n  payload: ClassicPreset.Control\n}\n\nexport function RefControl<Scheme extends ClassicScheme>({ name, emit, payload, ...props }: Props<Scheme>) {\n  return <RefComponent\n    {...props}\n    className={name}\n    init={ref => emit({ type: 'render', data: {\n      type: 'control',\n      element: ref,\n      payload: payload as GetControls<Scheme['Node']>\n    } })}\n    unmount={ref => emit({ type: 'unmount', data: { element: ref } })}\n  />\n}\n", "import * as React from 'react'\nimport { ClassicPreset, NodeId } from 'rete'\n\nimport { RefComponent } from '../../../../ref-component'\nimport { ClassicScheme, GetSockets, ReactArea2D, Side } from '../../types'\n\ntype Props<Scheme extends ClassicScheme> = {\n  name: string\n  emit: (props: ReactArea2D<Scheme>) => void\n  side: Side\n  nodeId: NodeId\n  socketKey: string\n  payload: ClassicPreset.Socket\n}\n\nexport function RefSocket<Scheme extends ClassicScheme>({ name, emit, nodeId, side, socketKey, payload, ...props }: Props<Scheme>) {\n  return <RefComponent\n    {...props}\n    className={name}\n    init={ref => emit({ type: 'render', data: {\n      type: 'socket',\n      side,\n      key: socketKey,\n      nodeId,\n      element: ref,\n      payload: payload as GetSockets<Scheme['Node']>\n    } })}\n    unmount={ref => emit({ type: 'unmount', data: { element: ref } })}\n  />\n}\n", "import * as React from 'react'\nimport styled, { css } from 'styled-components'\n\nimport { ClassicScheme, RenderEmit } from '../types'\nimport { $nodecolor, $nodecolorselected, $nodewidth, $socketmargin, $socketsize } from '../vars'\nimport { RefControl } from './refs/RefControl'\nimport { RefSocket } from './refs/RefSocket'\n\ntype NodeExtraData = { width?: number, height?: number }\n\nexport const NodeStyles = styled.div<NodeExtraData & { selected: boolean, styles?: (props: any) => any }>`\n    background: ${$nodecolor};\n    border: 2px solid #4e58bf;\n    border-radius: 10px;\n    cursor: pointer;\n    box-sizing: border-box;\n    width: ${props => Number.isFinite(props.width) ? `${props.width}px` : `${$nodewidth}px`};\n    height: ${props => Number.isFinite(props.height) ? `${props.height}px` : 'auto'};\n    padding-bottom: 6px;\n    position: relative;\n    user-select: none;\n    line-height: initial;\n    font-family: Arial;\n\n    &:hover {\n        background: lighten(${$nodecolor},4%);\n    }\n    ${props => props.selected && css`\n        background: ${$nodecolorselected};\n        border-color: #e3c000;\n    `}\n    .title {\n        color: white;\n        font-family: sans-serif;\n        font-size: 18px;\n        padding: 8px;\n    }\n    .output {\n        text-align: right;\n    }\n    .input {\n        text-align: left;\n    }\n    .output-socket {\n        text-align: right;\n        margin-right: -${$socketsize / 2 + $socketmargin}px;\n        display: inline-block;\n    }\n    .input-socket {\n        text-align: left;\n        margin-left: -${$socketsize / 2 + $socketmargin}px;\n        display: inline-block;\n    }\n    .input-title,.output-title {\n        vertical-align: middle;\n        color: white;\n        display: inline-block;\n        font-family: sans-serif;\n        font-size: 14px;\n        margin: ${$socketmargin}px;\n        line-height: ${$socketsize}px;\n    }\n    .input-control {\n        z-index: 1;\n        width: calc(100% - ${$socketsize + 2 * $socketmargin}px);\n        vertical-align: middle;\n        display: inline-block;\n    }\n    .control {\n        display: block;\n        padding: ${$socketmargin}px ${$socketsize / 2 + $socketmargin}px;\n    }\n    ${props => props.styles && props.styles(props)}\n`\n\nfunction sortByIndex<T extends [string, undefined | { index?: number }][]>(entries: T) {\n  entries.sort((a, b) => {\n    const ai = a[1]?.index || 0\n    const bi = b[1]?.index || 0\n\n    return ai - bi\n  })\n}\n\ntype Props<S extends ClassicScheme> = {\n    data: S['Node'] & NodeExtraData\n    styles?: () => any\n    emit: RenderEmit<S>\n}\nexport type NodeComponent<Scheme extends ClassicScheme> = (props: Props<Scheme>) => JSX.Element\n\n// eslint-disable-next-line max-statements\nexport function Node<Scheme extends ClassicScheme>(props: Props<Scheme>) {\n  const inputs = Object.entries(props.data.inputs)\n  const outputs = Object.entries(props.data.outputs)\n  const controls = Object.entries(props.data.controls)\n  const selected = props.data.selected || false\n  const { id, label, width, height } = props.data\n\n  sortByIndex(inputs)\n  sortByIndex(outputs)\n  sortByIndex(controls)\n\n  return (\n    <NodeStyles\n      selected={selected}\n      width={width}\n      height={height}\n      styles={props.styles}\n      data-testid=\"node\"\n    >\n      <div className=\"title\" data-testid=\"title\">{label}</div>\n      {/* Outputs */}\n      {outputs.map(([key, output]) => (\n        output && <div className=\"output\" key={key} data-testid={`output-${key}`}>\n          <div className=\"output-title\" data-testid=\"output-title\">{output?.label}</div>\n          <RefSocket\n            name=\"output-socket\"\n            side=\"output\"\n            socketKey={key}\n            nodeId={id}\n            emit={props.emit}\n            payload={output.socket}\n            data-testid=\"output-socket\"\n          />\n        </div>\n      ))}\n      {/* Controls */}\n      {controls.map(([key, control]) => {\n        return control ? <RefControl\n          key={key}\n          name=\"control\"\n          emit={props.emit}\n          payload={control}\n          data-testid={`control-${key}`}\n        /> : null\n      })}\n      {/* Inputs */}\n      {inputs.map(([key, input]) => (\n        input && <div className=\"input\" key={key} data-testid={`input-${key}`}>\n          <RefSocket\n            name=\"input-socket\"\n            side=\"input\"\n            socketKey={key}\n            nodeId={id}\n            emit={props.emit}\n            payload={input.socket}\n            data-testid=\"input-socket\"\n          />\n          {input && (!input.control || !input.showControl) && (\n            <div className=\"input-title\" data-testid=\"input-title\">{input?.label}</div>\n          )}\n          {input?.control && input?.showControl && (\n            <RefControl\n              key={key}\n              name=\"input-control\"\n              emit={props.emit}\n              payload={input.control}\n              data-testid=\"input-control\"\n            />\n          )\n          }\n        </div>\n      ))}\n    </NodeStyles>\n  )\n}\n", "import * as React from 'react'\nimport { ClassicPreset } from 'rete'\nimport styled from 'styled-components'\n\nimport { $socketcolor, $socketmargin, $socketsize } from '../vars'\n\nconst Styles = styled.div`\n    display: inline-block;\n    cursor: pointer;\n    border: 1px solid white;\n    border-radius: ${$socketsize/2.0}px;\n    width: ${$socketsize}px;\n    height: ${$socketsize}px;\n    vertical-align: middle;\n    background: ${$socketcolor};\n    z-index: 2;\n    box-sizing: border-box;\n    &:hover {\n      border-width: 4px;\n    }\n    &.multiple {\n      border-color: yellow;\n    }\n`\n\nconst Hoverable = styled.div`\n    border-radius: ${($socketsize + $socketmargin * 2)/2.0}px;\n    padding: ${$socketmargin}px;\n    &:hover ${Styles} {\n      border-width: 4px;\n    }\n`\n\nexport function Socket<T extends ClassicPreset.Socket>(props: { data: T }) {\n  return (\n    <Hoverable>\n      <Styles title={props.data.name} />\n    </Hoverable>\n  )\n}\n", "import * as React from 'react'\nimport { ClassicPreset, Scope } from 'rete'\nimport {\n  classicConnectionPath, getDOMSocketPosition,\n  loopConnectionPath, SocketPositionWatcher\n} from 'rete-render-utils'\n\nimport { Position } from '../../types'\nimport { RenderPreset } from '../types'\nimport { Connection } from './components/Connection'\nimport { ConnectionWrapper } from './components/ConnectionWrapper'\nimport { Control } from './components/Control'\nimport { Node } from './components/Node'\nimport { Socket } from './components/Socket'\nimport {\n  ClassicScheme, ExtractPayload, ReactArea2D, RenderEmit\n} from './types'\nimport { AcceptComponent } from './utility-types'\n\nexport { Connection } from './components/Connection'\nexport { useConnection } from './components/ConnectionWrapper'\nexport { Control } from './components/Control'\nexport { Control as InputControl } from './components/Control'\nexport { Node, NodeStyles } from './components/Node'\nexport { RefControl } from './components/refs/RefControl'\nexport { RefSocket } from './components/refs/RefSocket'\nexport { Socket } from './components/Socket'\nexport type { ClassicScheme, ReactArea2D, RenderEmit } from './types'\nexport * as vars from './vars'\n\ntype CustomizationProps<Schemes extends ClassicScheme> = {\n  node?: (data: ExtractPayload<Schemes, 'node'>) => AcceptComponent<typeof data['payload'], { emit: RenderEmit<Schemes> }> | null\n  connection?: (data: ExtractPayload<Schemes, 'connection'>) => AcceptComponent<typeof data['payload']> | null\n  socket?: (data: ExtractPayload<Schemes, 'socket'>) => AcceptComponent<typeof data['payload']> | null\n  control?: (data: ExtractPayload<Schemes, 'control'>) => AcceptComponent<typeof data['payload']> | null\n}\n\ntype ClassicProps<Schemes extends ClassicScheme, K> = {\n  socketPositionWatcher?: SocketPositionWatcher<Scope<never, [K]>>\n  customize?: CustomizationProps<Schemes>\n}\n\n/**\n * Classic preset for rendering nodes, connections, controls and sockets.\n */\nexport function setup<Schemes extends ClassicScheme, K extends ReactArea2D<Schemes>>(\n  props?: ClassicProps<Schemes, K>\n): RenderPreset<Schemes, K> {\n  const positionWatcher = typeof props?.socketPositionWatcher === 'undefined'\n    ? getDOMSocketPosition<Schemes, K>()\n    : props?.socketPositionWatcher\n  const { node, connection, socket, control } = props?.customize || {}\n\n  return {\n    attach(plugin) {\n      positionWatcher.attach(plugin as unknown as Scope<never, [K]>)\n    },\n    // eslint-disable-next-line max-statements, complexity\n    render(context, plugin) {\n      if (context.data.type === 'node') {\n        const parent = plugin.parentScope()\n        const Component = (node ? node(context.data) : Node) as typeof Node\n\n        return (Component &&\n          <Component\n            data={context.data.payload}\n            emit={data => parent.emit(data as any)}\n          />\n        )\n      } else if (context.data.type === 'connection') {\n        const Component = (connection ? connection(context.data) : Connection) as typeof Connection\n        const payload = context.data.payload\n        const { sourceOutput, targetInput, source, target } = payload\n\n        return (Component &&\n          <ConnectionWrapper\n            start={context.data.start || (change => positionWatcher.listen(source, 'output', sourceOutput, change))}\n            end={context.data.end || (change => positionWatcher.listen(target, 'input', targetInput, change))}\n            path={async (start, end) => {\n              type FixImplicitAny = typeof plugin.__scope.produces | undefined\n              const response: FixImplicitAny = await plugin.emit({\n                type: 'connectionpath', data: {\n                  payload,\n                  points: [start, end]\n                }\n              })\n\n              if (!response) return ''\n\n              const { path, points } = response.data\n              const curvature = 0.3\n\n              if (!path && points.length !== 2) throw new Error('cannot render connection with a custom number of points')\n              if (!path) return payload.isLoop\n                ? loopConnectionPath(points as [Position, Position], curvature, 120)\n                : classicConnectionPath(points as [Position, Position], curvature)\n\n              return path\n            }}\n          >\n            <Component data={context.data.payload} />\n          </ConnectionWrapper>\n        )\n      } else if (context.data.type === 'socket') {\n        const Component = (socket ? socket(context.data) : Socket) as typeof Socket\n\n        return (Component && context.data.payload && <Component data={context.data.payload} />\n        )\n      } else if (context.data.type === 'control') {\n        const Component = control && context.data.payload\n          ? control(context.data)\n          : (\n            context.data.payload instanceof ClassicPreset.InputControl\n              ? Control\n              : null\n          )\n\n        return Component && <Component data={context.data.payload as any} />\n      }\n    }\n  }\n}\n", "import { useEffect, useRef } from 'react'\n\nexport function useDebounce(cb: () => void, timeout: number): [null | (() => void), () => void] {\n  const ref = useRef<ReturnType<typeof setTimeout>>()\n\n  function cancel() {\n    ref.current && clearTimeout(ref.current)\n  }\n  const func = () => {\n    cancel()\n\n    ref.current = setTimeout(() => {\n      cb()\n    }, timeout)\n  }\n\n  useEffect(() => cancel, [])\n\n  return [\n    func,\n    cancel\n  ]\n}\n", "\nexport const $contextColor = 'rgba(110,136,255,0.8)'\nexport const $contextColorLight = 'rgba(130, 153, 255, 0.8)'\nexport const $contextColorDark = 'rgba(69, 103, 255, 0.8)'\nexport const $contextMenuRound = '5px'\nexport const $width = 120\n", "import styled from 'styled-components'\n\nimport { $contextColor, $contextColorDark, $contextColorLight, $contextMenuRound } from './vars'\n\nexport const CommonStyle = styled.div`\n  color: #fff;\n  padding: 4px;\n  border-bottom: 1px solid ${$contextColorDark};\n  background-color: ${$contextColor};\n  cursor: pointer;\n  width: 100%;\n  position: relative;\n  &:first-child {\n    border-top-left-radius: ${$contextMenuRound};\n    border-top-right-radius: ${$contextMenuRound};\n  }\n  &:last-child {\n    border-bottom-left-radius: ${$contextMenuRound};\n    border-bottom-right-radius: ${$contextMenuRound};\n  }\n  &:hover {\n    background-color: ${$contextColorLight};\n  }\n`\n", "import * as React from 'react'\nimport styled, { css } from 'styled-components'\n\nimport { useDebounce } from '../hooks'\nimport { CommonStyle } from '../styles'\nimport { Customize, Item } from '../types'\nimport { $width } from '../vars'\n\nexport const ItemStyle = styled(CommonStyle) <{ hasSubitems?: boolean }>`\n    ${props => props.hasSubitems && css`&:after {\n    content: 'â–º';\n    position: absolute;\n    opacity: 0.6;\n    right: 5px;\n    top: 5px;\n    }`}\n`\n\nexport const SubitemStyles = styled.div`\n    position: absolute;\n    top: 0;\n    left: 100%;\n    width: ${$width}px;\n`\n\ntype Props = {\n  data: Item\n  delay: number\n  hide(): void\n  children: React.ReactNode\n  components?: Pick<Customize, 'item' | 'subitems'>\n}\n\nexport function ItemElement(props: Props) {\n  const [visibleSubitems, setVisibleSubitems] = React.useState(false)\n  const setInvisibile = React.useCallback(() => setVisibleSubitems(false), [setVisibleSubitems])\n  const [hide, cancelHide] = useDebounce(setInvisibile, props.delay)\n  const Component = props.components?.item?.(props.data) || ItemStyle\n  const Subitems = props.components?.subitems?.(props.data) || SubitemStyles\n\n  return <Component\n    onClick={e => { e.stopPropagation(); props.data.handler(); props.hide() }}\n    hasSubitems={Boolean(props.data.subitems)}\n    onPointerDown={e => e.stopPropagation()}\n    onPointerOver={() => { cancelHide(); setVisibleSubitems(true) }}\n    onPointerLeave={() => hide && hide()}\n    data-testid=\"context-menu-item\"\n  >\n    {props.children}\n    {props.data.subitems && visibleSubitems && (\n      <Subitems>\n        {props.data.subitems.map(item => (\n          <ItemElement\n            key={item.key}\n            data={item}\n            delay={props.delay}\n            hide={props.hide}\n            components={props.components}\n          >{item.label}</ItemElement>\n        ))}\n      </Subitems>\n    )}\n  </Component>\n}\n", "import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { ComponentType } from '../types'\n\nexport const SearchInput = styled.input`\n  color: white;\n  padding: 1px 8px;\n  border: 1px solid white;\n  border-radius: 10px;\n  font-size: 16px;\n  font-family: serif;\n  width: 100%;\n  box-sizing: border-box;\n  background: transparent;\n`\n\nexport function Search(props: { value: string, onChange(value: string): void, component?: ComponentType }) {\n  const Component = props.component || SearchInput\n\n  return (\n    <Component\n      value={props.value}\n      onInput={e => props.onChange((e.target as HTMLInputElement).value)}\n      onPointerDown={e => e.stopPropagation()}\n      data-testid=\"context-menu-search-input\"\n    />\n  )\n}\n", "import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { useDebounce } from '../hooks'\nimport { CommonStyle } from '../styles'\nimport { Customize, Item } from '../types'\nimport { $width } from '../vars'\nimport { ItemElement } from './Item'\nimport { Search } from './Search'\n\nexport const Styles = styled.div`\n  padding: 10px;\n  width: ${$width}px;\n  margin-top: -20px;\n  margin-left: -${$width / 2}px;\n`\n\ntype Props = {\n  items: Item[]\n  delay: number\n  searchBar?: boolean\n  onHide(): void\n  components?: Customize\n}\n\nexport function Menu(props: Props) {\n  const [hide, cancelHide] = useDebounce(props.onHide, props.delay)\n  const [filter, setFilter] = React.useState('')\n  const filterRegexp = new RegExp(filter, 'i')\n  const filteredList = props.items.filter(item => (\n    item.label.match(filterRegexp)\n  ))\n  const Component = props.components?.main?.() || Styles\n  const Common = props.components?.common?.() || CommonStyle\n\n  return <Component\n    onMouseOver={() => cancelHide()}\n    onMouseLeave={() => hide && hide()}\n    onWheel={e => e.stopPropagation()}\n    data-testid=\"context-menu\"\n  >\n    {props.searchBar && (\n      <Common>\n        <Search value={filter} onChange={setFilter} component={props.components?.search?.()} />\n      </Common>\n    )}\n    {filteredList.map(item => {\n      return <ItemElement\n        key={item.key}\n        data={item}\n        delay={props.delay}\n        hide={props.onHide}\n        components={props.components}\n      >\n        {item.label}\n      </ItemElement>\n    })}\n  </Component>\n}\n", "\nimport * as React from 'react'\nimport { BaseSchemes } from 'rete'\n\nimport { RenderPreset } from '../types'\nimport { Menu } from './components/Menu'\nimport { ContextMenuRender, Customize } from './types'\n\nexport { ItemStyle as Item, SubitemStyles as Subitems } from './components/Item'\nexport { Styles as Menu } from './components/Menu'\nexport { SearchInput as Search } from './components/Search'\nexport { CommonStyle as Common } from './styles'\n\ntype Props = {\n  delay?: number\n  customize?: Customize\n}\n\n/**\n * Preset for rendering context menu.\n */\nexport function setup<Schemes extends BaseSchemes, K extends ContextMenuRender>(props?: Props): RenderPreset<Schemes, K> {\n  const delay = typeof props?.delay === 'undefined' ? 1000 : props.delay\n\n  return {\n    render(context) {\n      if (context.data.type === 'contextmenu') {\n        return <Menu\n          items={context.data.items}\n          delay={delay}\n          searchBar={context.data.searchBar}\n          onHide={context.data.onHide}\n          components={props?.customize}\n        />\n      }\n    }\n  }\n}\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { useState } from 'react';\nfunction useCopyToClipboard() {\n    const [copiedText, setCopiedText] = useState(null);\n    const copy = (text) => __awaiter(this, void 0, void 0, function* () {\n        if (!(navigator === null || navigator === void 0 ? void 0 : navigator.clipboard)) {\n            console.warn('Clipboard not supported');\n            return false;\n        }\n        try {\n            yield navigator.clipboard.writeText(text);\n            setCopiedText(text);\n            return true;\n        }\n        catch (error) {\n            console.warn('Copy failed', error);\n            setCopiedText(null);\n            return false;\n        }\n    });\n    return [copiedText, copy];\n}\nexport default useCopyToClipboard;\n", "import { useCallback, useState } from 'react';\nimport { useEventListener, useIsomorphicLayoutEffect } from '..';\nfunction useElementSize() {\n    const [ref, setRef] = useState(null);\n    const [size, setSize] = useState({\n        width: 0,\n        height: 0,\n    });\n    const handleSize = useCallback(() => {\n        setSize({\n            width: (ref === null || ref === void 0 ? void 0 : ref.offsetWidth) || 0,\n            height: (ref === null || ref === void 0 ? void 0 : ref.offsetHeight) || 0,\n        });\n    }, [ref === null || ref === void 0 ? void 0 : ref.offsetHeight, ref === null || ref === void 0 ? void 0 : ref.offsetWidth]);\n    useEventListener('resize', handleSize);\n    useIsomorphicLayoutEffect(() => {\n        handleSize();\n    }, [ref === null || ref === void 0 ? void 0 : ref.offsetHeight, ref === null || ref === void 0 ? void 0 : ref.offsetWidth]);\n    return [setRef, size];\n}\nexport default useElementSize;\n", "import { useEffect, useRef } from 'react';\nimport { useIsomorphicLayoutEffect } from '..';\nfunction useEventListener(eventName, handler, element, options) {\n    const savedHandler = useRef(handler);\n    useIsomorphicLayoutEffect(() => {\n        savedHandler.current = handler;\n    }, [handler]);\n    useEffect(() => {\n        var _a;\n        const targetElement = (_a = element === null || element === void 0 ? void 0 : element.current) !== null && _a !== void 0 ? _a : window;\n        if (!(targetElement && targetElement.addEventListener))\n            return;\n        const listener = event => savedHandler.current(event);\n        targetElement.addEventListener(eventName, listener, options);\n        return () => {\n            targetElement.removeEventListener(eventName, listener, options);\n        };\n    }, [eventName, element, options]);\n}\nexport default useEventListener;\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { useEffect, useReducer, useRef } from 'react';\nfunction useFetch(url, options) {\n    const cache = useRef({});\n    const cancelRequest = useRef(false);\n    const initialState = {\n        error: undefined,\n        data: undefined,\n    };\n    const fetchReducer = (state, action) => {\n        switch (action.type) {\n            case 'loading':\n                return Object.assign({}, initialState);\n            case 'fetched':\n                return Object.assign(Object.assign({}, initialState), { data: action.payload });\n            case 'error':\n                return Object.assign(Object.assign({}, initialState), { error: action.payload });\n            default:\n                return state;\n        }\n    };\n    const [state, dispatch] = useReducer(fetchReducer, initialState);\n    useEffect(() => {\n        if (!url)\n            return;\n        cancelRequest.current = false;\n        const fetchData = () => __awaiter(this, void 0, void 0, function* () {\n            dispatch({ type: 'loading' });\n            if (cache.current[url]) {\n                dispatch({ type: 'fetched', payload: cache.current[url] });\n                return;\n            }\n            try {\n                const response = yield fetch(url, options);\n                if (!response.ok) {\n                    throw new Error(response.statusText);\n                }\n                const data = (yield response.json());\n                cache.current[url] = data;\n                if (cancelRequest.current)\n                    return;\n                dispatch({ type: 'fetched', payload: data });\n            }\n            catch (error) {\n                if (cancelRequest.current)\n                    return;\n                dispatch({ type: 'error', payload: error });\n            }\n        });\n        void fetchData();\n        return () => {\n            cancelRequest.current = true;\n        };\n    }, [url]);\n    return state;\n}\nexport default useFetch;\n", "import { useEffect, useLayoutEffect } from 'react';\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\nexport default useIsomorphicLayoutEffect;\n", "export function px(value: number) {\n  return `${value}px`\n}\n", "import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { px } from '../utils'\n\nconst Styles = styled.div`\n    position: absolute;\n    background: rgba(110, 136, 255, 0.8);\n    border: 1px solid rgb(192 206 212 / 60%);\n`\n\nexport function MiniNode(props: { left: number, top: number, width: number, height: number }) {\n  return <Styles style={{\n    left: px(props.left),\n    top: px(props.top),\n    width: px(props.width),\n    height: px(props.height)\n  }} data-testid=\"minimap-node\"/>\n}\n", "import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { useDrag } from '../../../shared/drag'\nimport { Rect, Transform, Translate } from '../types'\nimport { px } from '../utils'\n\nconst MiniViewportStyles = styled.div`\n  position: absolute;\n  background: rgba(255, 251, 128, 0.32);\n  border: 1px solid #ffe52b;\n`\n\nexport function MiniViewport(props: Rect & { containerWidth: number, start(): Transform, translate: Translate }) {\n  const scale = (v: number) => v * props.containerWidth\n  const invert = (v: number) => v / props.containerWidth\n  const drag = useDrag((dx, dy) => props.translate(invert(-dx), invert(-dy)), e => ({ x: e.pageX, y: e.pageY }))\n\n  return <MiniViewportStyles\n    onPointerDown={drag.start}\n    style={{\n      left: px(scale(props.left)),\n      top: px(scale(props.top)),\n      width: px(scale(props.width)),\n      height: px(scale(props.height))\n    }}\n    data-testid=\"minimap-viewport\"\n  />\n}\n", "import * as React from 'react'\nimport { useCallback, useRef } from 'react'\nimport styled from 'styled-components'\nimport { useElementSize } from 'usehooks-ts'\n\nimport { Rect, Transform, Translate } from '../types'\nimport { px } from '../utils'\nimport { MiniNode } from './MiniNode'\nimport { MiniViewport } from './MiniViewport'\n\nconst Styles = styled.div<{ size: number }>`\n    position: absolute;\n    right: 24px;\n    bottom: 24px;\n    background: rgba(229, 234, 239, 0.65);\n    padding: 20px;\n    overflow: hidden;\n    border: 1px solid #b1b7ff;\n    border-radius: 8px;\n    box-sizing: border-box;\n`\n\ntype Props = {\n    size: number\n    ratio: number\n    nodes: Rect[]\n    viewport: Rect\n    start(): Transform\n    translate: Translate\n    point(x: number, y: number): void\n}\n\nexport function Minimap(props: Props) {\n  const container = useRef<HTMLElement | null>()\n  const [containerRef, { width: containerWidth }] = useElementSize()\n  const scale = (v: number) => v * containerWidth\n  const ref = useCallback((node: HTMLDivElement | null) => {\n    container.current = node\n    containerRef(node)\n  }, [containerRef])\n\n  return <Styles\n    size={props.size}\n    style={{\n      width: px(props.size * props.ratio),\n      height: px(props.size)\n    }}\n    onPointerDown={e => {\n      e.stopPropagation()\n      e.preventDefault()\n    }}\n    onDoubleClick={e => {\n      e.stopPropagation()\n      e.preventDefault()\n      if (!container.current) return\n      const box = container.current.getBoundingClientRect()\n      const x = (e.clientX - box.left) / (props.size * props.ratio)\n      const y = (e.clientY - box.top) / (props.size * props.ratio)\n\n      props.point(x, y)\n    }}\n    ref={ref}\n    data-testid=\"minimap\"\n  >\n    {containerWidth && props.nodes.map((node, i) => (\n      <MiniNode\n        key={i}\n        left={scale(node.left)}\n        top={scale(node.top)}\n        width={scale(node.width)}\n        height={scale(node.height)}\n      />\n    ))}\n    <MiniViewport\n      {...props.viewport}\n      start={props.start}\n      containerWidth={containerWidth}\n      translate={props.translate}\n    />\n  </Styles>\n}\n", "\nimport * as React from 'react'\nimport { BaseSchemes } from 'rete'\n\nimport { RenderPreset } from '../types'\nimport { Minimap } from './components/Minimap'\nimport { MinimapRender } from './types'\n\n/**\n * Preset for rendering minimap.\n */\nexport function setup<Schemes extends BaseSchemes, K extends MinimapRender>(props?: { size?: number }): RenderPreset<Schemes, K> {\n  return {\n    render(context) {\n      if (context.data.type === 'minimap') {\n        return <Minimap\n          nodes={context.data.nodes}\n          size={props?.size || 200}\n          ratio={context.data.ratio}\n          viewport={context.data.viewport}\n          start={context.data.start}\n          translate={context.data.translate}\n          point={context.data.point}\n        />\n      }\n    }\n  }\n}\n", "import * as React from 'react'\nimport styled, { } from 'styled-components'\n\nimport { useDrag } from '../../shared/drag'\nimport { Position } from '../../types'\nimport { Pin as PinType } from './types'\n\nconst pinSize = 20\n\nconst Styles = styled.div<{ selected?: boolean }>`\n  width: ${pinSize}px;\n  height: ${pinSize}px;\n  box-sizing: border-box;\n  background: ${props => props.selected ? '#ffd92c' : 'steelblue'};\n  border: 2px solid white;\n  border-radius: ${pinSize}px;\n`\n\ntype Props = PinType & {\n    contextMenu(): void\n    translate(dx: number, dy: number): void\n    pointerdown(): void\n    pointer(): Position\n}\n\nexport function Pin(props: Props) {\n  const drag = useDrag((dx, dy) => props.translate(dx, dy), props.pointer)\n  const { x, y } = props.position\n\n  return (\n    <Styles\n      onPointerDown={e => {\n        e.stopPropagation()\n        e.preventDefault()\n        drag.start(e)\n        props.pointerdown()\n      }}\n      onContextMenu={e => {\n        e.stopPropagation()\n        e.preventDefault()\n        props.contextMenu()\n      }}\n      selected={props.selected}\n      style={{ position: 'absolute', top: `${y - pinSize / 2}px`, left: `${x - pinSize / 2}px` }}\n      data-testid=\"pin\"\n    >\n\n    </Styles>\n  )\n}\n", "\nimport * as React from 'react'\nimport { BaseSchemes } from 'rete'\nimport { BaseAreaPlugin } from 'rete-area-plugin'\n\nimport { Position } from '../../types'\nimport { RenderPreset } from '../types'\nimport { Pin } from './Pin'\nimport { PinData, PinsRender } from './types'\n\ntype Props = {\n  translate?: (id: string, dx: number, dy: number) => void\n  contextMenu?: (id: string) => void\n  pointerdown?: (id: string) => void\n}\n\n/**\n * Preset for rendering pins.\n */\nexport function setup<Schemes extends BaseSchemes, K extends PinsRender>(props?: Props): RenderPreset<Schemes, K> {\n  function renderPins(data: PinData, pointer: () => Position) {\n    return <>\n      {data.pins.map(pin => (\n        <Pin\n          {...pin}\n          key={pin.id}\n          contextMenu={() => props?.contextMenu && props.contextMenu(pin.id)}\n          translate={(dx, dy) => props?.translate && props.translate(pin.id, dx, dy)}\n          pointerdown={() => props?.pointerdown && props.pointerdown(pin.id)}\n          pointer={pointer}\n        />\n      ))}\n    </>\n  }\n\n  return {\n    render(context, plugin) {\n      const data = context.data\n      const area = plugin.parentScope<BaseAreaPlugin<Schemes, PinsRender>>(BaseAreaPlugin)\n\n      if (data.type === 'reroute-pins') {\n        return renderPins(data.data, () => area.area.pointer)\n      }\n    }\n  }\n}\n", "/**\n * Built-in presets, responsible for rendering different parts of the editor.\n * @module\n */\nexport * as classic from './classic'\nexport * as contextMenu from './context-menu'\nexport * as minimap from './minimap'\nexport * as reroute from './reroute-pins'\n", "import * as React from 'react'\nimport { BaseSchemes, CanAssignSignal, Scope } from 'rete'\n\nimport { RenderPreset } from './presets/types'\nimport { getRenderer, Renderer } from './renderer'\nimport { Position, RenderSignal } from './types'\nimport { Root } from './utils'\n\nexport * as Presets from './presets'\nexport type { ClassicScheme, ReactArea2D, RenderEmit } from './presets/classic'\nexport { RefComponent } from './ref-component'\nexport * from './shared'\nexport * from './types'\nexport { useRete } from './utils'\n\n/**\n * Signals that can be emitted by the plugin\n * @priority 9\n */\nexport type Produces<Schemes extends BaseSchemes> =\n  | { type: 'connectionpath', data: { payload: Schemes['Connection'], path?: string, points: Position[] } }\n\ntype Requires<Schemes extends BaseSchemes> =\n  | RenderSignal<'node', { payload: Schemes['Node'] }>\n  | RenderSignal<'connection', { payload: Schemes['Connection'], start?: Position, end?: Position }>\n  | { type: 'unmount', data: { element: HTMLElement } }\n\n/**\n * Plugin props\n */\nexport type Props = {\n  /** root factory for React.js 18+ */\n  createRoot?: (container: Element | DocumentFragment) => any\n}\n\n/**\n * React plugin. Renders nodes, connections and other elements using React.\n * @priority 10\n * @emits connectionpath\n * @listens render\n * @listens unmount\n */\nexport class ReactPlugin<Schemes extends BaseSchemes, T = Requires<Schemes>> extends Scope<Produces<Schemes>, [Requires<Schemes> | T]> {\n  renderer: Renderer\n  presets: RenderPreset<Schemes, T>[] = []\n\n  constructor(props?: Props) {\n    super('react-render')\n    this.renderer = getRenderer({ createRoot: props?.createRoot })\n\n    this.addPipe(context => {\n      if (!context || typeof context !== 'object' || !('type' in context)) return context\n      if (context.type === 'unmount') {\n        this.unmount(context.data.element)\n      } else if (context.type === 'render') {\n        if ('filled' in context.data && context.data.filled) {\n          return context\n        }\n        if (this.mount(context.data.element, context)) {\n          return {\n            ...context,\n            data: {\n              ...context.data,\n              filled: true\n            }\n          } as typeof context\n        }\n      }\n\n      return context\n    })\n  }\n\n  setParent(scope: Scope<Requires<Schemes> | T>): void {\n    super.setParent(scope)\n\n    this.presets.forEach(preset => {\n      if (preset.attach) preset.attach(this)\n    })\n  }\n\n  private mount(element: HTMLElement, context: Requires<Schemes>) {\n    const parent = this.parentScope()\n\n    for (const preset of this.presets) {\n      const result = preset.render(context as any, this)\n\n      if (!result) continue\n\n      const reactElement = (\n        <Root rendered={() => parent.emit({ type: 'rendered', data: context.data } as T)}>\n          {result}\n        </Root>\n      )\n\n      this.renderer.mount(reactElement, element)\n      return true\n    }\n  }\n\n  private unmount(element: HTMLElement) {\n    this.renderer.unmount(element)\n  }\n\n  /**\n   * Adds a preset to the plugin.\n   * @param preset Preset that can render nodes, connections and other elements.\n   */\n  public addPreset<K>(preset: RenderPreset<Schemes, CanAssignSignal<T, K> extends true ? K : 'Cannot apply preset. Provided signals are not compatible'>) {\n    const local = preset as RenderPreset<Schemes, T>\n\n    if (local.attach) local.attach(this)\n    this.presets.push(local)\n  }\n}\n"],
  "mappings": "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",
  "names": ["getRenderer", "props", "createRoot", "wrappers", "WeakMap", "getWrapper", "container", "wrapper", "get", "span", "document", "createElement", "appendChild", "set", "removeWrapper", "remove", "roots", "mount", "element", "has", "root", "render", "unmount", "ReactDOM", "unmountComponentAtNode", "Root", "_ref", "children", "rendered", "useEffect", "syncFlush", "ready", "useRef", "current", "apply", "f", "queueMicrotask", "flushSync", "useRete", "create", "_useState", "useState", "_useState2", "_slicedToArray", "setContainer", "editorRef", "_useState3", "_useState4", "editor", "setEditor", "ref", "destroy", "innerHTML", "then", "value", "ConnectionContext", "createContext", "start", "end", "path", "ConnectionWrapper", "computedStart", "setStart", "computedEnd", "setEnd", "_useState5", "_useState6", "setPath", "flush", "unwatch1", "s", "unwatch2", "p", "Provider", "useConnection", "useContext", "Svg", "styled", "svg", "_templateObject", "_taggedTemplateLiteral", "Path", "_templateObject2", "styles", "Connection", "_useConnection", "d", "copyEvent", "e", "newEvent", "constructor", "type", "Object", "getPrototypeOf", "keys", "getOwnPropertyNames", "_iterator", "_createForOfIteratorHelper", "_step", "n", "done", "k", "item", "defineProperty", "err", "rootPrefix", "findReactRoot", "_reactRootContainer", "some", "key", "startsWith", "parentElement", "useDrag", "translate", "getPointer", "previous", "_objectSpread", "move", "moveEvent", "dx", "x", "dy", "y", "up", "window", "removeEventListener", "addEventListener", "useNoDrag", "disabled", "React", "handleClick", "target", "version", "stopPropagation", "dispatchEvent", "el", "NoDrag", "Input", "input", "Control", "_React$useState", "data", "_React$useState2", "setValue", "Drag", "readOnly", "readonly", "onChange", "val", "$nodecolor", "$nodecolorselected", "$socketsize", "$socketmargin", "$socketcolor", "$nodewidth", "RefComponent", "init", "_objectWithoutProperties", "_excluded", "_extends", "RefControl", "name", "emit", "payload", "className", "RefSocket", "nodeId", "side", "socketKey", "NodeStyles", "div", "Number", "isFinite", "width", "concat", "height", "selected", "css", "sortByIndex", "entries", "sort", "a", "b", "_a$", "_b$", "ai", "index", "bi", "Node", "inputs", "outputs", "controls", "_props$data", "id", "label", "map", "_ref2", "output", "socket", "_ref3", "_ref4", "control", "_ref5", "_ref6", "showControl", "Styles", "Hoverable", "Socket", "title", "setup", "positionWatcher", "socketPositionWatcher", "getDOMSocketPosition", "customize", "node", "connection", "attach", "plugin", "context", "parent", "parentScope", "Component", "sourceOutput", "targetInput", "source", "change", "listen", "_asyncToGenerator", "_regeneratorRuntime", "mark", "_callee", "response", "_response$data", "points", "curvature", "wrap", "_callee$", "_context", "prev", "next", "sent", "abrupt", "length", "Error", "isLoop", "loopConnectionPath", "classicConnectionPath", "stop", "_x", "_x2", "arguments", "_Component", "_Component2", "ClassicPreset", "InputControl", "_Component3", "useDebounce", "cb", "timeout", "cancel", "clearTimeout", "func", "setTimeout", "$contextColor", "$contextColorLight", "$contextColorDark", "$contextMenuRound", "$width", "CommonStyle", "ItemStyle", "hasSubitems", "SubitemStyles", "_templateObject3", "ItemElement", "_props$components", "_props$components$ite", "_props$components2", "_props$components2$su", "visibleSubitems", "setVisibleSubitems", "setInvisibile", "useCallback", "_useDebounce", "delay", "_useDebounce2", "hide", "cancelHide", "components", "call", "Subitems", "subitems", "onClick", "handler", "Boolean", "onPointerDown", "onPointerOver", "onPointerLeave", "SearchInput", "Search", "component", "onInput", "Menu", "_props$components$mai", "_props$components2$co", "_props$components3", "_props$components3$se", "onHide", "filter", "setFilter", "filterRegexp", "RegExp", "filteredList", "items", "match", "main", "Common", "common", "onMouseOver", "onMouseLeave", "onWheel", "searchBar", "search", "px", "value", "concat", "Styles", "styled", "div", "_templateObject", "_taggedTemplateLiteral", "MiniNode", "props", "createElement", "style", "left", "top", "width", "height", "MiniViewportStyles", "MiniViewport", "scale", "v", "containerWidth", "invert", "drag", "useDrag", "dx", "dy", "translate", "e", "x", "pageX", "y", "pageY", "onPointerDown", "start", "Minimap", "container", "useRef", "_useElementSize", "useElementSize", "_useElementSize2", "_slicedToArray", "containerRef", "ref", "useCallback", "node", "current", "size", "ratio", "stopPropagation", "preventDefault", "onDoubleClick", "box", "getBoundingClientRect", "clientX", "clientY", "point", "nodes", "map", "i", "key", "_extends", "viewport", "setup", "render", "context", "data", "type", "pinSize", "selected", "Pin", "pointer", "_props$position", "position", "pointerdown", "onContextMenu", "contextMenu", "renderPins", "Fragment", "pins", "pin", "id", "plugin", "area", "parentScope", "BaseAreaPlugin", "ReactPlugin", "_Scope", "_inherits", "_super", "_createSuper", "_this", "_classCallCheck", "call", "_defineProperty", "_assertThisInitialized", "renderer", "getRenderer", "createRoot", "addPipe", "_typeof", "unmount", "element", "filled", "mount", "_objectSpread", "_createClass", "setParent", "scope", "_this2", "_get", "_getPrototypeOf", "prototype", "presets", "forEach", "preset", "attach", "parent", "_iterator", "_createForOfIteratorHelper", "_step", "s", "n", "done", "result", "reactElement", "Root", "rendered", "emit", "err", "f", "addPreset", "local", "push", "Scope"]
}
